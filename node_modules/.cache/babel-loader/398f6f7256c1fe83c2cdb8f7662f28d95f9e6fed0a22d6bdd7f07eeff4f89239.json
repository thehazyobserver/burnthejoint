{"ast":null,"code":"import{useEffect,useState}from'react';import{ethers}from'ethers';import Web3Modal from'web3modal';import contractABI from'./abi/LIGHTTHEJOINT.json';import ConnectWallet from'./components/ConnectWallet';import MintButton from'./components/MintButton';import NFTGallery from'./components/NFTGallery';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CONTRACT_ADDRESS='0x5e4C6B87B644430Fa71F9158B5292808756b7D44';const SONIC_RPC='https://sonic.drpc.org';export default function App(){const[provider,setProvider]=useState(null);const[signer,setSigner]=useState(null);const[contract,setContract]=useState(null);const[account,setAccount]=useState('');const[ownedNFTs,setOwnedNFTs]=useState([]);const[loading,setLoading]=useState(false);const connectWallet=async()=>{const web3Modal=new Web3Modal({network:'sonic',cacheProvider:false,providerOptions:{}});const connection=await web3Modal.connect();const _provider=new ethers.BrowserProvider(connection,146);const _signer=_provider.getSigner();const _account=await _signer.getAddress();const _contract=new ethers.Contract(CONTRACT_ADDRESS,contractABI,_signer);setProvider(_provider);setSigner(_signer);setAccount(_account);setContract(_contract);};const mint=async()=>{if(!contract)return;setLoading(true);try{const tx=await contract.mint({value:ethers.parseEther('0')});await tx.wait();fetchOwnedNFTs();}catch(err){console.error(err);}setLoading(false);};const lightJoint=async tokenId=>{if(!contract)return;setLoading(true);try{const tx=await contract.lightTheJoint(tokenId);await tx.wait();fetchOwnedNFTs();}catch(err){console.error(err);}setLoading(false);};const fetchOwnedNFTs=async()=>{if(!contract||!account)return;try{const ids=await contract.walletOfOwner(account);const nfts=await Promise.all(ids.map(async id=>{const isLit=await contract.getLitStatus(id);const tokenURI=await contract.tokenURI(id);return{id:id.toString(),isLit,tokenURI};}));setOwnedNFTs(nfts);}catch(err){console.error(err);}};useEffect(()=>{if(contract&&account){fetchOwnedNFTs();}},[contract,account]);return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"\\uD83D\\uDD25 Light The Joint\"}),!account?/*#__PURE__*/_jsx(ConnectWallet,{onConnect:connectWallet}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{style:styles.address,children:[\"Connected: \",account]}),/*#__PURE__*/_jsx(MintButton,{onMint:mint,loading:loading}),/*#__PURE__*/_jsx(NFTGallery,{nfts:ownedNFTs,onLight:lightJoint,loading:loading})]})]});}const styles={container:{maxWidth:'100%',padding:'1rem',margin:'0 auto',fontFamily:'Arial, sans-serif'},title:{fontSize:'clamp(1.5rem, 6vw, 2.5rem)',textAlign:'center',marginBottom:'1rem'},address:{fontSize:'0.9rem',textAlign:'center',marginBottom:'1rem',wordBreak:'break-word'}};","map":{"version":3,"names":["useEffect","useState","ethers","Web3Modal","contractABI","ConnectWallet","MintButton","NFTGallery","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CONTRACT_ADDRESS","SONIC_RPC","App","provider","setProvider","signer","setSigner","contract","setContract","account","setAccount","ownedNFTs","setOwnedNFTs","loading","setLoading","connectWallet","web3Modal","network","cacheProvider","providerOptions","connection","connect","_provider","BrowserProvider","_signer","getSigner","_account","getAddress","_contract","Contract","mint","tx","value","parseEther","wait","fetchOwnedNFTs","err","console","error","lightJoint","tokenId","lightTheJoint","ids","walletOfOwner","nfts","Promise","all","map","id","isLit","getLitStatus","tokenURI","toString","style","styles","container","children","title","onConnect","address","onMint","onLight","maxWidth","padding","margin","fontFamily","fontSize","textAlign","marginBottom","wordBreak"],"sources":["C:/Users/deanw/OneDrive/Desktop/GitHub/burnthejoint/src/app.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport Web3Modal from 'web3modal';\r\nimport contractABI from './abi/LIGHTTHEJOINT.json';\r\nimport ConnectWallet from './components/ConnectWallet';\r\nimport MintButton from './components/MintButton';\r\nimport NFTGallery from './components/NFTGallery';\r\n\r\nconst CONTRACT_ADDRESS = '0x5e4C6B87B644430Fa71F9158B5292808756b7D44';\r\nconst SONIC_RPC = 'https://sonic.drpc.org';\r\n\r\nexport default function App() {\r\n  const [provider, setProvider] = useState(null);\r\n  const [signer, setSigner] = useState(null);\r\n  const [contract, setContract] = useState(null);\r\n  const [account, setAccount] = useState('');\r\n  const [ownedNFTs, setOwnedNFTs] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const connectWallet = async () => {\r\n    const web3Modal = new Web3Modal({\r\n      network: 'sonic',\r\n      cacheProvider: false,\r\n      providerOptions: {},\r\n    });\r\n    const connection = await web3Modal.connect();\r\n    const _provider = new ethers.BrowserProvider(connection, 146);\r\n    const _signer = _provider.getSigner();\r\n    const _account = await _signer.getAddress();\r\n    const _contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, _signer);\r\n\r\n    setProvider(_provider);\r\n    setSigner(_signer);\r\n    setAccount(_account);\r\n    setContract(_contract);\r\n  };\r\n\r\n  const mint = async () => {\r\n    if (!contract) return;\r\n    setLoading(true);\r\n    try {\r\n      const tx = await contract.mint({ value: ethers.parseEther('0') });\r\n      await tx.wait();\r\n      fetchOwnedNFTs();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const lightJoint = async (tokenId) => {\r\n    if (!contract) return;\r\n    setLoading(true);\r\n    try {\r\n      const tx = await contract.lightTheJoint(tokenId);\r\n      await tx.wait();\r\n      fetchOwnedNFTs();\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchOwnedNFTs = async () => {\r\n    if (!contract || !account) return;\r\n    try {\r\n      const ids = await contract.walletOfOwner(account);\r\n      const nfts = await Promise.all(\r\n        ids.map(async (id) => {\r\n          const isLit = await contract.getLitStatus(id);\r\n          const tokenURI = await contract.tokenURI(id);\r\n          return { id: id.toString(), isLit, tokenURI };\r\n        })\r\n      );\r\n      setOwnedNFTs(nfts);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (contract && account) {\r\n      fetchOwnedNFTs();\r\n    }\r\n  }, [contract, account]);\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h1 style={styles.title}>ðŸ”¥ Light The Joint</h1>\r\n      {!account ? (\r\n        <ConnectWallet onConnect={connectWallet} />\r\n      ) : (\r\n        <>\r\n          <p style={styles.address}>Connected: {account}</p>\r\n          <MintButton onMint={mint} loading={loading} />\r\n          <NFTGallery nfts={ownedNFTs} onLight={lightJoint} loading={loading} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {\r\n    maxWidth: '100%',\r\n    padding: '1rem',\r\n    margin: '0 auto',\r\n    fontFamily: 'Arial, sans-serif',\r\n  },\r\n  title: {\r\n    fontSize: 'clamp(1.5rem, 6vw, 2.5rem)',\r\n    textAlign: 'center',\r\n    marginBottom: '1rem',\r\n  },\r\n  address: {\r\n    fontSize: '0.9rem',\r\n    textAlign: 'center',\r\n    marginBottom: '1rem',\r\n    wordBreak: 'break-word',\r\n  },\r\n};\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,MAAM,KAAQ,QAAQ,CAC/B,MAAO,CAAAC,SAAS,KAAM,WAAW,CACjC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAClD,MAAO,CAAAC,aAAa,KAAM,4BAA4B,CACtD,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEjD,KAAM,CAAAC,gBAAgB,CAAG,4CAA4C,CACrE,KAAM,CAAAC,SAAS,CAAG,wBAAwB,CAE1C,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACkB,MAAM,CAAEC,SAAS,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACoB,QAAQ,CAAEC,WAAW,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAA4B,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAA3B,SAAS,CAAC,CAC9B4B,OAAO,CAAE,OAAO,CAChBC,aAAa,CAAE,KAAK,CACpBC,eAAe,CAAE,CAAC,CACpB,CAAC,CAAC,CACF,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAJ,SAAS,CAACK,OAAO,CAAC,CAAC,CAC5C,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAlC,MAAM,CAACmC,eAAe,CAACH,UAAU,CAAE,GAAG,CAAC,CAC7D,KAAM,CAAAI,OAAO,CAAGF,SAAS,CAACG,SAAS,CAAC,CAAC,CACrC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAF,OAAO,CAACG,UAAU,CAAC,CAAC,CAC3C,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAxC,MAAM,CAACyC,QAAQ,CAAC7B,gBAAgB,CAAEV,WAAW,CAAEkC,OAAO,CAAC,CAE7EpB,WAAW,CAACkB,SAAS,CAAC,CACtBhB,SAAS,CAACkB,OAAO,CAAC,CAClBd,UAAU,CAACgB,QAAQ,CAAC,CACpBlB,WAAW,CAACoB,SAAS,CAAC,CACxB,CAAC,CAED,KAAM,CAAAE,IAAI,CAAG,KAAAA,CAAA,GAAY,CACvB,GAAI,CAACvB,QAAQ,CAAE,OACfO,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAiB,EAAE,CAAG,KAAM,CAAAxB,QAAQ,CAACuB,IAAI,CAAC,CAAEE,KAAK,CAAE5C,MAAM,CAAC6C,UAAU,CAAC,GAAG,CAAE,CAAC,CAAC,CACjE,KAAM,CAAAF,EAAE,CAACG,IAAI,CAAC,CAAC,CACfC,cAAc,CAAC,CAAC,CAClB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CACpB,CACAtB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,KAAM,CAAAyB,UAAU,CAAG,KAAO,CAAAC,OAAO,EAAK,CACpC,GAAI,CAACjC,QAAQ,CAAE,OACfO,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAiB,EAAE,CAAG,KAAM,CAAAxB,QAAQ,CAACkC,aAAa,CAACD,OAAO,CAAC,CAChD,KAAM,CAAAT,EAAE,CAACG,IAAI,CAAC,CAAC,CACfC,cAAc,CAAC,CAAC,CAClB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CACpB,CACAtB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,KAAM,CAAAqB,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAI,CAAC5B,QAAQ,EAAI,CAACE,OAAO,CAAE,OAC3B,GAAI,CACF,KAAM,CAAAiC,GAAG,CAAG,KAAM,CAAAnC,QAAQ,CAACoC,aAAa,CAAClC,OAAO,CAAC,CACjD,KAAM,CAAAmC,IAAI,CAAG,KAAM,CAAAC,OAAO,CAACC,GAAG,CAC5BJ,GAAG,CAACK,GAAG,CAAC,KAAO,CAAAC,EAAE,EAAK,CACpB,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAA1C,QAAQ,CAAC2C,YAAY,CAACF,EAAE,CAAC,CAC7C,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAA5C,QAAQ,CAAC4C,QAAQ,CAACH,EAAE,CAAC,CAC5C,MAAO,CAAEA,EAAE,CAAEA,EAAE,CAACI,QAAQ,CAAC,CAAC,CAAEH,KAAK,CAAEE,QAAS,CAAC,CAC/C,CAAC,CACH,CAAC,CACDvC,YAAY,CAACgC,IAAI,CAAC,CACpB,CAAE,MAAOR,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CACpB,CACF,CAAC,CAEDlD,SAAS,CAAC,IAAM,CACd,GAAIqB,QAAQ,EAAIE,OAAO,CAAE,CACvB0B,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAAE,CAAC5B,QAAQ,CAAEE,OAAO,CAAC,CAAC,CAEvB,mBACEZ,KAAA,QAAKwD,KAAK,CAAEC,MAAM,CAACC,SAAU,CAAAC,QAAA,eAC3B7D,IAAA,OAAI0D,KAAK,CAAEC,MAAM,CAACG,KAAM,CAAAD,QAAA,CAAC,8BAAkB,CAAI,CAAC,CAC/C,CAAC/C,OAAO,cACPd,IAAA,CAACJ,aAAa,EAACmE,SAAS,CAAE3C,aAAc,CAAE,CAAC,cAE3ClB,KAAA,CAAAE,SAAA,EAAAyD,QAAA,eACE3D,KAAA,MAAGwD,KAAK,CAAEC,MAAM,CAACK,OAAQ,CAAAH,QAAA,EAAC,aAAW,CAAC/C,OAAO,EAAI,CAAC,cAClDd,IAAA,CAACH,UAAU,EAACoE,MAAM,CAAE9B,IAAK,CAACjB,OAAO,CAAEA,OAAQ,CAAE,CAAC,cAC9ClB,IAAA,CAACF,UAAU,EAACmD,IAAI,CAAEjC,SAAU,CAACkD,OAAO,CAAEtB,UAAW,CAAC1B,OAAO,CAAEA,OAAQ,CAAE,CAAC,EACtE,CACH,EACE,CAAC,CAEV,CAEA,KAAM,CAAAyC,MAAM,CAAG,CACbC,SAAS,CAAE,CACTO,QAAQ,CAAE,MAAM,CAChBC,OAAO,CAAE,MAAM,CACfC,MAAM,CAAE,QAAQ,CAChBC,UAAU,CAAE,mBACd,CAAC,CACDR,KAAK,CAAE,CACLS,QAAQ,CAAE,4BAA4B,CACtCC,SAAS,CAAE,QAAQ,CACnBC,YAAY,CAAE,MAChB,CAAC,CACDT,OAAO,CAAE,CACPO,QAAQ,CAAE,QAAQ,CAClBC,SAAS,CAAE,QAAQ,CACnBC,YAAY,CAAE,MAAM,CACpBC,SAAS,CAAE,YACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}